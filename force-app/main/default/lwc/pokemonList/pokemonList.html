<template>
    <template if:true={pokemons.data}>
        <!-- Buscador -->
        <div class="search">
            <input
                type="text"
                placeholder="Search Pokémon..."
                value={searchTerm}
                oninput={handleSearch}
            />
            <button
                class="clear"
                onclick={clearSearch}
                if:true={searchTerm}
            >
                ✕
            </button>
        </div>
        <div class="filters">
            <lightning-combobox
                label="Filter by type"
                value={selectedType}
                options={typeOptions}
                onchange={handleTypeChange}>
            </lightning-combobox>
        </div>


        <!-- Grid -->
        <div class="grid">
            <template for:each={filteredPokemons} for:item="p">
                <div
                    key={p.Id}
                    class="card clickable"
                    data-id={p.Id}
                    data-type={p.Primary_Type__c}
                    onclick={handleCardClick}>
                    <img src={p.Sprite_URL__c} alt={p.Name} />
                    <h2>{p.Number__c} - {p.Name}</h2>
                    <p>
                        {p.Primary_Type__c}
                        <template if:true={p.Secondary_Type__c}>
                            / {p.Secondary_Type__c}
                        </template>
                    </p>
                </div>
            </template>
        </div>
    </template>

    <template if:true={pokemons.error}>
        <p>Error loading Pokémon</p>
    </template>
</template>
